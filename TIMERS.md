P = I / f
counter only counts 100 -> 00
Time = difference in counts x clock period = (100 -0 ) x 0.5 us = 50us

one cycle / clock period, is the rising and falling and rising again
![[IMG_5777.jpg]]
Event Counter
-

Up Counter
Down Counter
- Free running Counter
	- start, then run non stop
	- you may set flags or generate an interrupt signal 
- Time Delay
- Pulse Wave Generation
- Pulse Width Measurement
- note: PWM=Post Width Modulation
	- modulate high time and low time
- Duty Cycle
	- amount of high time 
- Timers in the counter mode
	- use timers as counters

### Timers in PIC16F877A
- Timer1 Module
	- 16 bit timer/counter consist of two 8-bit registers
	- TMR1H and TMR1L
		- readable and writable
	- interrupt is generated on overflow
	- two modes, timer or counter
- Timer 2 Module
	- 8 bit timer, with prescaler and postscaler
	- can be used as PWM time base
	- PWM mode of the CCP modules
	- TMR2 registers is readable and writable , and is cleard on any device reset
	- PR2 8 bit period registers
	- Count on PR2 will set the TIMER 2 count limit until reset
- Built In Modules
	- Capture, Compare and PWM module
		- most likely have to deal Timer and Counter
		- Capture
			- getting particular count
		- Compare
			- compare two values
		- PWM
- Registers need to take note of for setting up TIMERS
- PIE1
	- Peripheral Interrupt Enable1 Register
	- 
- PIR1
- INTCON
	- interrupt control register
	- need to turn on PEIE and GIE 
		- PEIE is the mask enabler of registers/interrupts
- T1CON
	- bit 2 - sync external clock or sync
	- bit 1 
	- For external clocks, connect to RC0
- TIMER1
	- timeout
		- starting value to end value, how long it takes
- Timer 2 registers need to configure
	- T2CON
	- PIE1 
	- PIR1
	- INTCON
### CCP MODULE
- if your are using timer 1 you cant use capture, compare vise versa
- if you use timer2  you cant use PWM, vise versa\
- CCP1
	- comprised of 2 8 bit registers CCPR1L and CCPR1H
	- CCP1CON register controls the operation of CCP1
	- special event trgger is generated bya compare match and will reset Timer1.
	- REGISTERS
		- PIE1
			- interrupt
		- PIR1
		- CCP1COn
		- INTCON
	- Capture Mode:
		- uses tmr1 register
		- 


- Is there way to identify the count limit 



### LAB EXCERCISES
### TIMER 1 Module
- has 2 modes
	- Timer and Counter
	- Timer
		- increments every instruction cycle
	- Counter
		- increments every external clock input
- 16 bit 
- 2 8 bit registers
	- TMR1L
	- TMR1H

Sample Code:
NOTE: Please include [[EMBEDDED PIC16F877a HEADER]]
```c
void interrupt ISR(void)  
{  
	GIE = 0; // disable all unmasked interrupts (INTCON reg)  
	if(TMR1IF==1) // checks Timer1 interrupt flag  
	{  
		TMR1IF = 0; // clears interrupt flag  
		TMR1 = 0x0BDC; // timer will start counting at 0x0BDC (3036)  
		RA0 = RA0^1; // toggles the LED at RA0  
	}  
	GIE = 1; // enable all unmasked interrupts (INTCON reg)  
}

void main(void)  
{  
	ADCON1 = 0x06; // set all pins in PORTA as digital I/O  
	TRISA = 0x00; // sets all of PORTA to output  
	RA0 = 0; // initialize RA0 to 0 (LED off)  
	T1CON = 0x30; // 1:8 prescaler, internal clock, Timer1 off  
	TMR1IE = 1; // enable Timer1 overflow interrupt (PIE1 reg)  
	TMR1IF = 0; // reset interrupt flag (PIR1 reg)  
	PEIE = 1; // enable all peripheral interrupt (INTCON reg)  
	GIE = 1; // enable all unmasked interrupts (INTCON reg)  
	TMR1 = 0x0BDC; // counter starts counting at 0x0BDC (3036)  
	TMR1ON = 1; // Turns on Timer1 (T1CON reg)  
	for(;;) // foreground routine  
	{  
	}  
}
```

Schematic Diagram
![[Pasted image 20250324000241.png]]
### TIMER 2 Module
- 8 bit timer with a prescaler and postscalaer
- used as the PWM time base for the PWM mode of the CCP modules
- TMR2 is readable and writeable and is cleared on any device reset
- 8 bit register PR2 if TMR2=PR2 (MATCH) will generate an interrupt
- does not generate interrupt upon overflow


FOSC/4 stands for 
- instruction clock frequency
- represents the main oscillator frequency
- This division allows the microcontroller to execute one assembly instruction per instruction clock cycle